html_text()
mensaje <- discurso %>%
html_node(".wysiwyg:not(resaltar")) %>%
html_text()
mensaje <- discurso %>%
html_node(".wysiwyg:not(resaltar")) %>%
html_text()
mensaje <- discurso %>%
html_node(".wysiwyg:not(resaltar)") %>%
html_text()
mesnaje
mensaje
mensaje <- discurso %>%
html_node(".wysiwyg:not(.resaltar)") %>%
html_text()
mensaje
mensaje <- discurso %>%
html_node("#wysiwyg:not(#resaltar)") %>%
html_text()
mensaje
mensaje
mensaje <- discurso %>%
html_node(".wysiwyg:not(p:resaltar)") %>%
html_text()
mensaje <- discurso %>%
html_node(".wysiwyg:not(p:.resaltar)") %>%
html_text()
mensaje <- discurso %>%
html_node(".wysiwyg:not(p.resaltar)") %>%
html_text()
mensaje
mensaje <- discurso %>%
html_nodes(".wysiwyg:not(p.resaltar)") %>%
html_text()
mensaje
mensaje <- discurso %>%
html_nodes(".wysiwyg:not(*:resaltar)") %>%
html_text()
mensaje <- discurso %>%
html_nodes(".wysiwyg:not(resaltar)") %>%
html_text()
mensaje
mensaje <- discurso %>%
html_nodes("p:not(p.resaltar):not(contains(Video)") %>%
html_text()
mensaje <- discurso %>%
html_nodes(".wysiwyg:not(.resaltar)") %>%
html_name()
mensaje <- discurso %>%
html_nodes(".wysiwyg:not(.resaltar)") %>%
html_name()
discurso <- read_html(url)
mensaje <- discurso %>%
html_nodes(".wysiwyg:not(.resaltar)") %>%
html_name()
mensaje <- discurso %>%
html_nodes(".wysiwyg:") %>%
html_name()
mensaje <- discurso %>%
html_nodes(".wysiwyg") %>%
html_name()
url <- "http://www.casareal.es/ES/Actividades/Paginas/actividades_discursos_detalle.aspx?data=5632"
discurso <- read_html(url)
mensaje <- discurso %>%
html_nodes(".wysiwyg") %>%
html_nodes(":not(.resaltar)") %>%
html_text()
mesnaje
mensaje
library(rvest)
url <- "http://www.casareal.es/ES/Actividades/Paginas/actividades_discursos_detalle.aspx?data=5632"
discurso <- read_html(url)
View(discurso)
View(discurso)
mensaje <- discurso %>%
html_nodes(".wysiwyg") %>%
html_nodes(".capital") %>%
html_nodes(":not(.resaltar)") %>%
html_text()
head(mensaje)
mensaje <- discurso %>%
html_nodes(".wysiwyg") %>%
#html_nodes(".capital") %>%
html_nodes(":not(.resaltar)") %>%
html_text()
head(mensaje)
listado <- read.delim("https://raw.githubusercontent.com/7PartidasDigital/AnalisisTextual/master/mensajes/DISCURSOS-INDICE.txt", header = T, sep = "\t", stringsAsFactors = F)
listado
listado
# Análisis PoS y Legibilidad
#########
library(koRpus)
set.kRp.env(TT.cmd="~/Documents/TreeTagger/cmd/tree-tagger-spanish", lang="es")
get.kRp.env(TT.cmd=TRUE)
LIX("~/Dropbox/_R-nuevo/_TEXTOS/-BARTLETT/txt/DELICADO-01_Ritos-de-muerte_Alicia-Gimenez-Bartlett.txt")
set.kRp.env(TT.cmd="~/Documents/TreeTagger/cmd/tree-tagger-spanish", lang="es")
get.kRp.env(TT.cmd=TRUE)
LIX("~/Documents/GitHub/AnalisisTextual/mensajes/corpus/1975.txt")
# Análisis PoS y Legibilidad
#########
library(koRpus)
available.koRpus.lang()
set.kRp.env(TT.cmd="~/Documents/TreeTagger/cmd/tree-tagger-spanish", lang="es")
get.kRp.env(TT.cmd=TRUE)
LIX("~/Documents/GitHub/AnalisisTextual/mensajes/corpus/1975.txt")
set.kRp.env(TT.cmd="~/Documents/TreeTagger/cmd/tree-tagger-spanish")
get.kRp.env(TT.cmd=TRUE)
LIX("~/Documents/GitHub/AnalisisTextual/mensajes/corpus/1975.txt")
readability("~/Documents/GitHub/AnalisisTextual/mensajes/corpus/1977.txt")
rajoy.etiquetado <- treetag("~/Dropbox/_R-NUEVO/ALUMNOS-NLP/rajoy.txt", lang = "es",
treetagger = "manual",
TT.options=list(path="~/Documents/TreeTagger", preset="es"))
# Análisis PoS y Legibilidad
#########
library(koRpus)
set.kRp.env(TT.cmd="~/Documents/TreeTagger/cmd/tree-tagger-spanish", lang="es")
get.kRp.env(TT.cmd=TRUE)
mensajes <- list.files("~/Documents/GitHub/AnalisisTextual/mensajes/corpus/")
LIX("~/Documents/GitHub/AnalisisTextual/mensajes/corpus/1975.txt")
# Análisis PoS y Legibilidad
#########
library(koRpus)
library(koRpus.lang.es)
set.kRp.env(TT.cmd="~/Documents/TreeTagger/cmd/tree-tagger-spanish", lang="es")
get.kRp.env(TT.cmd=TRUE)
LIX("~/Dropbox/_R-nuevo/_TEXTOS/-DELIBES/txt/Cinco-horas-con-Mario_Miguel-Delibes.txt")
LIX("~/Dropbox/_R-nuevo/_TEXTOS/-VARGASLLOSA/txt/La-tia-Julia-y-el-escribidor_Mario-Vargas-Llosa.txt")
LIX("~/Dropbox/_R-nuevo/_TEXTOS/-VARGASLLOSA/La-tia-Julia-y-el-escribidor_Mario-Vargas-Llosa.txt")
LIX("~/Dropbox/_R-nuevo/_TEXTOS/-RIBAS/txt/Azul-marino_Rosa-Ribas.txt")
LIX("~/Dropbox/_R-nuevo/_SENTIMIENTO_ARTICULO/DEBATE_ESTADO_NACION/corpus/Zapatero2005.txt")
LIX("~/Dropbox/_R-nuevo/_SENTIMIENTO_ARTICULO/DEBATE_ESTADO_NACION/corpus/Zapatero_2005.txt")
LIX("~/Dropbox/_R-nuevo/_SENTIMIENTO_ARTICULO/DEBATE_ESTADO_NACION/corpus/Zapatero_2006.txt")
LIX("~/Dropbox/_R-nuevo/_SENTIMIENTO_ARTICULO/DEBATE_ESTADO_NACION/corpus/Zapatero_2007.txt")
LIX("~/Dropbox/_R-nuevo/_SENTIMIENTO_ARTICULO/DEBATE_ESTADO_NACION/corpus/Zapatero_2009.txt")
LIX("~/Dropbox/_R-nuevo/_SENTIMIENTO_ARTICULO/DEBATE_ESTADO_NACION/corpus/Zapatero_2010.txt")
LIX("~/Dropbox/_R-nuevo/_SENTIMIENTO_ARTICULO/DEBATE_ESTADO_NACION/corpus/Zapatero_2011.txt")
LIX("~/Dropbox/_R-nuevo/_SENTIMIENTO_ARTICULO/DEBATE_ESTADO_NACION/corpus/Rajoy_2013.txt")
LIX("~/Dropbox/_R-nuevo/_SENTIMIENTO_ARTICULO/DEBATE_ESTADO_NACION/corpus/Rajoy_2014.txt")
LIX("~/Dropbox/_R-nuevo/_SENTIMIENTO_ARTICULO/DEBATE_ESTADO_NACION/corpus/Rajoy_2015.txt")
rayoy2015 <- LIX("~/Dropbox/_R-nuevo/_SENTIMIENTO_ARTICULO/DEBATE_ESTADO_NACION/corpus/Rajoy_2015.txt")
rayoy2015$LIX
str(rayoy2015)
rayoy2015[[RR]]
rayoy2015[["TT.res"]]
rayoy2015 <- readability("~/Dropbox/_R-nuevo/_SENTIMIENTO_ARTICULO/DEBATE_ESTADO_NACION/corpus/Rajoy_2015.txt")
install.sylly.lang()
install.sylly.lang("es")
library(sylly.es)
ejemplo <- c("Hola", "ahumado", "cacharro", "hueco", "demostración")
hyphen(ejemplo, hyph.pattern="es")
resultado <- hyphen(ejemplo, hyph.pattern="es")
unlist
df <- unlist(resultado)
newdf1 <- as.data.frame(result[['df1']])
cols<-c("column1", "Column2", "Column3")
df1<-data.frame(matrix(ncol = 3, nrow = 1))
colnames(df1)<-cols
df1
result<-list()
result['df1']<-list(df1)
df <- as.data.frame(resultado[[@hyphen]])
df <- as.data.frame(resultado[[hyphen]])
df <- as.data.frame(resultado[[hyphen$word]])
resultado
str(resultado)
slotNames(resultado)
df <- slot(resultado, "hyphen")
View(df)
slotNames(rayoy2015)
aa <- slot(rayoy2015, "hyphen")
slotNames(aa)
bb <- slot(aa, "hyphen")
View(bb)
manage.hyph.pat("es", set = "aí")
ejemplo <- c("Hola", "ahumado", "cacharro", "hueco", "demostración", "país", "queríamos")
hyphen(ejemplo, hyph.pattern="es")
manage.hyph.pat(hyph.pattern = "es", set = "aí")
ejemplo <- c("Hola", "ahumado", "cacharro", "hueco", "demostración", "país", "queríamos", "degüello")
hyphen(ejemplo, hyph.pattern="es")
ejemplo <- c("cambiáis", "puntúa", "feo", "hueco", "demostración", "país", "queríamos", "degüello", "cigüena")
hyphen(ejemplo, hyph.pattern="es")
ejemplo <- c("cambiáis", "puntúa", "feo", "hueco", "búho", "país", "cacatúa", "desvíen", "maría")
hyphen(ejemplo, hyph.pattern="es")
library(tidyverse)
library(tidytext)
setwd("~/Documents/GitHub/AnalisisTextual/mensajes/corpus")
# Esto los lee y los guarda en MesnajesNavidad
MensajesNavidad <- data_frame(ficheros) %>%
mutate(texto = map(ficheros, read_lines)) %>%
rename(anno = ficheros) %>%
unnest()
ficheros <- list.files()
# Esto los lee y los guarda en MesnajesNavidad
MensajesNavidad <- data_frame(ficheros) %>%
mutate(texto = map(ficheros, read_lines)) %>%
rename(anno = ficheros) %>%
unnest()
reyes <- c("Juan Carlos I", "Juan Carlos I", "Juan Carlos I", "Juan Carlos I", "Juan Carlos I", "Juan Carlos I", "Juan Carlos I", "Juan Carlos I", "Juan Carlos I", "Juan Carlos I", "Juan Carlos I", "Juan Carlos I", "Juan Carlos I", "Juan Carlos I", "Juan Carlos I", "Juan Carlos I", "Juan Carlos I", "Juan Carlos I", "Juan Carlos I", "Juan Carlos I", "Juan Carlos I", "Juan Carlos I", "Juan Carlos I", "Juan Carlos I", "Juan Carlos I", "Juan Carlos I", "Juan Carlos I", "Juan Carlos I", "Juan Carlos I", "Juan Carlos I", "Juan Carlos I", "Juan Carlos I", "Juan Carlos I", "Juan Carlos I", "Juan Carlos I", "Juan Carlos I", "Juan Carlos I", "Juan Carlos I", "Juan Carlos I", "Felipe VI", "Felipe VI", "Feleipe VI", "Felipe VI")
MensajesNavidad <- MensajesNavidad %>%
group_by(anno) %>%
mutate(parrafo = row_number()) %>%
mutate(rey = rey) %>%
ungroup() #%>%
MensajesNavidad <- MensajesNavidad %>%
group_by(anno) %>%
mutate(parrafo = row_number()) %>%
mutate(rey = reyes) %>%
ungroup() #%>%
MensajesNavidad$rey <- MensajesNavidad$anno
MensajesNavidad$rey[[1:39]] <- "Juan Carlos I"
MensajesNavidad$rey[1:39] <- "Juan Carlos I"
MensajesNavidad$rey[40:43] <- "Felipe VI"
View(MensajesNavidad)
MensajesNavidad$rey <- MensajesNavidad$anno
MensajesNavidad$rey[1:39] <- "Juan Carlos I"
MensajesNavidad$rey[40:43] <- "Felipe VI"
MensajesNavidad$anno <- gsub("\\.txt", "", MensajesNavidad$anno, perl =T)
View(MensajesNavidad)
View(MensajesNavidad)
MensajesNavidad$rey <- MensajesNavidad$anno
MensajesNavidad$rey[1:1202] <- "Juan Carlos I"
MensajesNavidad$rey[1203:1327] <- "Felipe VI"
View(MensajesNavidad)
MensajesNavidad$duracion <- MensajesNavidad$rey
MensajesNavidad$duracion <- MensajesNavidad$anno
datos <- read_csv("..\duracion_mensajes.txt", delim = "\t", col_names = T)
datos <- read_csv(".\duracion_mensajes.txt", delim = "\t", col_names = T)
datos <- read_csv("./duracion_mensajes.txt", delim = "\t", col_names = T)
datos <- read_csv("../duracion_mensajes.txt", delim = "\t", col_names = T)
datos <- read_tsv("../duracion_mensajes.txt", col_names = T)
datos <- read_tsv("../duracion_mensajes.txt", col_names = T)
ficheros <- list.files(pattern = "*.txt")
ficheros <- list.files(pattern = "*.txt")
# Esto los lee y los guarda en MesnajesNavidad
MensajesNavidad <- data_frame(ficheros) %>%
mutate(texto = map(ficheros, read_lines)) %>%
rename(anno = ficheros) %>%
unnest()
datos <- read_tsv("../duracion_mensajes.txt", col_names = T)
MensajesNavidad$anno <- gsub("\\.txt", "", MensajesNavidad$anno, perl =T)
MensajesNavidad <- rigth_join(MensajesNavidad, datos, by ="anno")
MensajesNavidad <- right_join(MensajesNavidad, datos, by ="anno")
datos <- read_tsv("../duracion_mensajes.txt", col_names = T, col_types = cols(.default = col_character()))
ficheros <- list.files(pattern = "*.txt")
# Esto los lee y los guarda en MesnajesNavidad
MensajesNavidad <- data_frame(ficheros) %>%
mutate(texto = map(ficheros, read_lines)) %>%
rename(anno = ficheros) %>%
unnest()
datos <- read_tsv("../duracion_mensajes.txt", col_names = T, col_types = cols(.default = col_character()))
MensajesNavidad$anno <- gsub("\\.txt", "", MensajesNavidad$anno, perl =T)
MensajesNavidad <- right_join(MensajesNavidad, datos, by ="anno")
ficheros <- list.files(pattern = "*.txt")
# Esto los lee y los guarda en MesnajesNavidad
MensajesNavidad <- data_frame(ficheros) %>%
mutate(texto = map(ficheros, read_lines)) %>%
rename(anno = ficheros) %>%
unnest()
datos <- read_tsv("../duracion_mensajes.txt", col_names = T, col_types = cols(.default = col_character()))
MensajesNavidad$anno <- gsub("\\.txt", "", MensajesNavidad$anno, perl =T)
MensajesNavidad <- left_join(MensajesNavidad, datos, by ="anno")
View(MensajesNavidad)
columnas <- c("anno", "rey", "duracion")
MensajesNavidad %<>% mutate_at(columnas, funs(factor(.)))
MensajesNavidad %>% mutate_at(columnas, funs(factor(.)))
datos$duracion <- lubridate::period_to_seconds(hms(datos$duracion))
datos$duracion <- lubridate::period_to_seconds(lubridate::hms(datos$duracion))
a <- datos$duracion
write_tsv(datos, "datos2.txt")
ficheros <- list.files(pattern = "*.txt")
# Esto los lee y los guarda en MesnajesNavidad
MensajesNavidad <- data_frame(ficheros) %>%
mutate(texto = map(ficheros, read_lines)) %>%
rename(anno = ficheros) %>%
unnest()
datos <- read_tsv("../duracion_mensajes.txt", col_names = T, col_types = cols(.default = col_character()))
columnas <- c("anno", "rey", "duracion")
MensajesNavidad$anno <- gsub("\\.txt", "", MensajesNavidad$anno, perl =T)
datos <- read_tsv("../MetaDatos.txt", col_names = T, col_types = cols(.default = col_character()))
datos <- read_tsv("../MetaDatos.txt", col_names = T, col_types = cols(.default = col_character()))
datos <- read_tsv("../MetaDatos.txt", col_names = T)
datos <- read_tsv("../MetaDatos.txt", col_names = T, col_types = cols(anno = col_character(), rey = col_factor()))
ficheros <- list.files(pattern = "*.txt")
# Esto los lee y los guarda en MesnajesNavidad
MensajesNavidad <- data_frame(ficheros) %>%
mutate(texto = map(ficheros, read_lines)) %>%
rename(anno = ficheros) %>%
unnest() %>%
str_extract(anno, ".txt", "")
# Esto los lee y los guarda en MesnajesNavidad
MensajesNavidad <- data_frame(ficheros) %>%
mutate(texto = map(ficheros, read_lines)) %>%
rename(anno = ficheros) %>%
unnest() %>%
str_extract(".txt", "")
# Esto los lee y los guarda en MesnajesNavidad
MensajesNavidad <- data_frame(ficheros) %>%
mutate(texto = map(ficheros, read_lines)) %>%
rename(anno = ficheros) %>%
unnest() %>%
str_extract(".txt")
# Esto los lee y los guarda en MesnajesNavidad
MensajesNavidad <- data_frame(ficheros) %>%
mutate(texto = map(ficheros, read_lines)) %>%
rename(anno = ficheros) %>%
unnest() %>%
str_replace(".txt", "")
# Esto los lee y los guarda en MesnajesNavidad
MensajesNavidad <- data_frame(ficheros) %>%
mutate(texto = map(ficheros, read_lines)) %>%
rename(anno = ficheros) %>%
unnest() %>%
str_replace(anno, ".txt", "")
# Esto los lee y los guarda en MesnajesNavidad
MensajesNavidad <- data_frame(ficheros) %>%
mutate(texto = map(ficheros, read_lines)) %>%
rename(anno = ficheros) %>%
unnest() %>%
str_replace("\.txt", "")
# Esto los lee y los guarda en MesnajesNavidad
MensajesNavidad <- data_frame(ficheros) %>%
mutate(texto = map(ficheros, read_lines)) %>%
rename(anno = ficheros) %>%
unnest()
# Esto los lee y los guarda en MesnajesNavidad
MensajesNavidad <- data_frame(ficheros) %>%
mutate(texto = map(ficheros, read_lines)) %>%
rename(anno = ficheros) %>%
unnest() %>%
str_remove_all(anno, ".txt", "")
# Esto los lee y los guarda en MesnajesNavidad
MensajesNavidad <- data_frame(ficheros) %>%
mutate(texto = map(ficheros, read_lines)) %>%
rename(anno = ficheros) %>%
unnest() %>%
gsub("\\.txt", "", MensajesNavidad$anno, perl =T)
# Esto los lee y los guarda en MesnajesNavidad
MensajesNavidad <- data_frame(ficheros) %>%
mutate(texto = map(ficheros, read_lines)) %>%
rename(anno = ficheros) %>%
unnest()
# Borra de la columna anno la extensión de fichero .txt
MensajesNavidad$anno <- gsub("\\.txt", "", MensajesNavidad$anno, perl =T)
# Une a MensajesNavidad los MetaDatos: rey y duración en segundos de cada mensaje
MensajesNavidad <- MensajesNavidad %>%
left_join(MensajesNavidad, datos, by ="anno") %>%
mutate_at(columnas, funs(factor(.)))
columnas <- c("anno", "rey", "duracion")
# Une a MensajesNavidad los MetaDatos: rey y duración en segundos de cada mensaje
MensajesNavidad <- MensajesNavidad %>%
left_join(MensajesNavidad, datos, by ="anno") %>%
mutate_at(columnas, funs(factor(.)))
ficheros <- list.files(pattern = "*.txt")
MetaDatos <- read_tsv("../MetaDatos.txt", col_names = T, col_types = cols(.default = col_character()))
columnas <- c("anno", "rey", "duracion")
# Esto los lee y los guarda en MesnajesNavidad
MensajesNavidad <- data_frame(ficheros) %>%
mutate(texto = map(ficheros, read_lines)) %>%
rename(anno = ficheros) %>%
unnest()
# Borra de la columna anno la extensión de fichero .txt
MensajesNavidad$anno <- gsub("\\.txt", "", MensajesNavidad$anno, perl =T)
# Une a MensajesNavidad los MetaDatos: rey y duración en segundos de cada mensaje
MensajesNavidad <- MensajesNavidad %>%
left_join(MensajesNavidad, MetaDatos, by ="anno") %>%
mutate_at(columnas, funs(factor(.)))
# Une a MensajesNavidad los MetaDatos: rey y duración en segundos de cada mensaje
MensajesNavidad <- MensajesNavidad %>%
left_join(MensajesNavidad, MetaDatos, by ="anno") #%>%
ficheros <- list.files(pattern = "*.txt")
MetaDatos <- read_tsv("../MetaDatos.txt", col_names = T, col_types = cols(.default = col_character()))
columnas <- c("anno", "rey", "duracion")
# Esto los lee y los guarda en MesnajesNavidad
MensajesNavidad <- data_frame(ficheros) %>%
mutate(texto = map(ficheros, read_lines)) %>%
rename(anno = ficheros) %>%
unnest()
# Borra de la columna anno la extensión de fichero .txt
MensajesNavidad$anno <- gsub("\\.txt", "", MensajesNavidad$anno, perl =T)
MensajesNavidad <- left_join(MensajesNavidad, datos, by ="anno")
MensajesNavidad <- left_join(MensajesNavidad, MetaDatos, by ="anno")
ficheros <- list.files(pattern = "*.txt")
MetaDatos <- read_tsv("../MetaDatos.txt", col_names = T, col_types = cols(.default = col_character()))
columnas <- c("anno", "rey", "duracion")
# Esto los lee y los guarda en MesnajesNavidad
MensajesNavidad <- data_frame(ficheros) %>%
mutate(texto = map(ficheros, read_lines)) %>%
rename(anno = ficheros) %>%
unnest()
# Borra de la columna anno la extensión de fichero .txt
MensajesNavidad$anno <- gsub("\\.txt", "", MensajesNavidad$anno, perl =T)
# Une a MensajesNavidad los MetaDatos: rey y duración en segundos de cada mensaje
MensajesNavidad <- MensajesNavidad %>%
left_join(MensajesNavidad, MetaDatos, by ="anno") #%>%
# Esto los lee y los guarda en MesnajesNavidad
MensajesNavidad <- data_frame(ficheros) %>%
mutate(texto = map(ficheros, read_lines)) %>%
rename(anno = ficheros) %>%
unnest()
ficheros <- list.files(pattern = "*.txt")
MetaDatos <- read_tsv("../MetaDatos.txt", col_names = T, col_types = cols(.default = col_character()))
columnas <- c("anno", "rey", "duracion")
# Esto los lee y los guarda en MesnajesNavidad
MensajesNavidad <- data_frame(ficheros) %>%
mutate(texto = map(ficheros, read_lines)) %>%
rename(anno = ficheros) %>%
unnest()
# Borra de la columna anno la extensión de fichero .txt
MensajesNavidad$anno <- gsub("\\.txt", "", MensajesNavidad$anno, perl =T)
MensajesNavidad <- left_join(MensajesNavidad, MetaDatos, by ="anno")
MensajesNavidad <- MensajesNavidad[, c(1,3,4,2)]
# Convierte todas la columnas, salvo texto a factores
MensajesNavidad <- MensajesNavidad %>%
mutate_at(columnas, funs(factor(.)))
levels(MensajesNavidad$rey)
levels(MensajesNavidad$anno)
levels(MensajesNavidad$duracion)
columnas <- c("anno", "rey")
# Esto los lee y los guarda en MesnajesNavidad
MensajesNavidad <- data_frame(ficheros) %>%
mutate(texto = map(ficheros, read_lines)) %>%
rename(anno = ficheros) %>%
unnest()
# Borra de la columna anno la extensión de fichero .txt
MensajesNavidad$anno <- gsub("\\.txt", "", MensajesNavidad$anno, perl =T)
# Une a MensajesNavidad los MetaDatos: rey y duración en segundos de cada mensaje
MensajesNavidad <- left_join(MensajesNavidad, MetaDatos, by ="anno")
# Reordena las columnas
MensajesNavidad <- MensajesNavidad[, c(1,3,4,2)]
# Convierte todas la columnas, salvo texto a factores
MensajesNavidad <- MensajesNavidad %>%
mutate_at(columnas, funs(factor(.)))
MensajesNavidad
MetaDatos <- read_tsv("../MetaDatos.txt", col_names = T)
ficheros <- list.files(pattern = "*.txt")
MetaDatos <- read_tsv("../MetaDatos.txt", col_names = T, col_types = cols(anno = col_character(), rey =col_factor()))
MetaDatos <- read_tsv("../MetaDatos.txt", col_names = T, col_types = cols(anno = col_character()))
# Esto los lee y los guarda en MensajesNavidad
MensajesNavidad <- data_frame(ficheros) %>%
mutate(texto = map(ficheros, read_lines)) %>%
rename(anno = ficheros) %>%
unnest()
# Borra de la columna anno la extensión de fichero .txt
MensajesNavidad$anno <- gsub("\\.txt", "", MensajesNavidad$anno, perl =T)
# Une a MensajesNavidad los MetaDatos: rey y duración en segundos de cada mensaje
MensajesNavidad <- left_join(MensajesNavidad, MetaDatos, by ="anno")
# Reordena las columnas
MensajesNavidad <- MensajesNavidad[, c(1,3,4,2)]
# Convierte rey y anno a factores (Ya veremos para qué)
MensajesNavidad <- MensajesNavidad %>%
mutate_at(columnas, funs(factor(.)))
columnas <- c("anno", "rey")
ficheros <- list.files(pattern = "*.txt")
MetaDatos <- read_tsv("../MetaDatos.txt", col_names = T, col_types = cols(anno = col_character()))
# Esto los lee y los guarda en MensajesNavidad
MensajesNavidad <- data_frame(ficheros) %>%
mutate(texto = map(ficheros, read_lines)) %>%
rename(anno = ficheros) %>%
unnest()
# Borra de la columna anno la extensión de fichero .txt
MensajesNavidad$anno <- gsub("\\.txt", "", MensajesNavidad$anno, perl =T)
# Une a MensajesNavidad los MetaDatos: rey y duración en segundos de cada mensaje
MensajesNavidad <- left_join(MensajesNavidad, MetaDatos, by ="anno")
# Reordena las columnas
MensajesNavidad <- MensajesNavidad[, c(1,3,4,2)]
# Convierte rey y anno a factores (Ya veremos para qué)
MensajesNavidad <- MensajesNavidad %>%
mutate_at(c("anno", "rey"), funs(factor(.)))
rm(MetaDatos,ficheros)
# Convierte rey y anno a factores (Ya veremos para qué)
MensajesNavidad <- MensajesNavidad %>%
mutate_at(c("anno", "rey"), funs(factor(.))) %>%
group_by(anno) %>%
mutate(parrafo = row_number()) %>%
ungroup()
View(MensajesNavidad)
ficheros <- list.files(pattern = "*.txt")
MetaDatos <- read_tsv("../MetaDatos.txt", col_names = T, col_types = cols(anno = col_character()))
# Esto los lee y los guarda en MensajesNavidad
MensajesNavidad <- data_frame(ficheros) %>%
mutate(texto = map(ficheros, read_lines)) %>%
rename(anno = ficheros) %>%
unnest()
# Borra de la columna anno la extensión de fichero .txt
MensajesNavidad$anno <- gsub("\\.txt", "", MensajesNavidad$anno, perl =T)
# Une a MensajesNavidad los MetaDatos: rey y duración en segundos de cada mensaje
MensajesNavidad <- left_join(MensajesNavidad, MetaDatos, by ="anno")
# Convierte rey y anno a factores (Ya veremos para qué) y numera cada párrafo de cada
# mensaje.
MensajesNavidad <- MensajesNavidad %>%
mutate_at(c("anno", "rey"), funs(factor(.))) %>%
group_by(anno) %>%
mutate(parrafo = row_number()) %>%
ungroup()
# Reordena las columnas
MensajesNavidad <- MensajesNavidad[, c(1,3,4,5,2)]
# No se suele recomendar, pero para tener un poco más limpio el Environment,
# borro dos objetos que ya no harán falta:
rm(MetaDatos,ficheros)
# Ahora lo vamos a dividir en oraciones.
MensajesNavidad_oraciones <- MensajesNavidad %>%
unnest_tokens(oraciones, texto, token = "sentences")
View(MensajesNavidad_oraciones)
# Ahora lo vamos a dividir en oraciones.
MensajesNavidad_oraciones <- MensajesNavidad %>%
unnest_tokens(oraciones, texto, token = "sentences") %>%
group_by(anno,parrafo) %>%
mutate(oracion_id = row_number()) %>%
ungroup()
View(MensajesNavidad_oraciones)
MensajesNavidad_oraciones <- MensajesNavidad_oraciones[, c(1,2,3,4,6,5)]
View(MensajesNavidad_oraciones)
